# 🚀 ThinkSpace - Render Deployment Guide

## 📋 Prerequisites

1. **GitHub Repository**: Push your code to GitHub
2. **Render Account**: Sign up at [render.com](https://render.com)
3. **Environment Variables**: Prepare the values below

---

## 🔧 Environment Variables

### Server Environment Variables (Set in Render Dashboard):

- `NODE_ENV` = `production` (auto-set)
- `DATABASE_URL` = (auto-generated by Render PostgreSQL)
- `JWT_SECRET` = (generate random 32+ character string)
- `FRONTEND_URL` = `https://thinkspace-client.onrender.com`

### Client Environment Variables (Set in Render Dashboard):

- `VITE_API_URL` = `https://thinkspace-api.onrender.com/api`

---

## 🚀 Deployment Steps

### Step 1: Push to GitHub
```bash
git add .
git commit -m "Ready for Render deployment"
git push origin main
```

### Step 2: Connect Render to GitHub
1. Go to [render.com](https://render.com)
2. Sign up/login with GitHub
3. Click "New +" → "Blueprint"
4. Connect your GitHub repository
5. Select the `think-space` repository

### Step 3: Render Auto-Deployment
Render will automatically detect the `render.yaml` file and deploy:

1. **PostgreSQL Database** (`thinkspace-db`)
2. **Backend API** (`thinkspace-api`)
3. **Frontend** (`thinkspace-client`)

### Step 4: Configure Environment Variables
1. Go to Render Dashboard
2. For **thinkspace-api** service:
   - Add `JWT_SECRET` (generate a secure random string)
   - `FRONTEND_URL` will be auto-set
3. For **thinkspace-client** service:
   - `VITE_API_URL` will be auto-set

### Step 5: Access Your App
- **Frontend**: `https://thinkspace-client.onrender.com`
- **Backend**: `https://thinkspace-api.onrender.com`
- **Health Check**: `https://thinkspace-api.onrender.com/api/health`

---

## 🔧 Service Configuration

The deployment includes:

### Database Service
- **Type**: PostgreSQL
- **Plan**: Free (1GB storage)
- **Auto-backups**: Yes

### Backend Service
- **Type**: Web Service
- **Plan**: Free (512MB RAM)
- **Build**: `cd server && npm install && npx prisma generate && npx prisma migrate deploy`
- **Start**: `cd server && npm start`
- **Health Check**: `/api/health`

### Frontend Service
- **Type**: Static Site
- **Plan**: Free
- **Build**: `cd client && npm install && npm run build`
- **Publish**: `client/dist`

---

## ⚠️ Free Tier Limitations

- **Sleep after 15 minutes** of inactivity ✅ **SOLVED** with keep-alive service
- **512MB RAM** for backend
- **1GB database storage**
- **750 hours/month** compute time

### 🔄 Keep-Alive Service
Your server includes an automatic keep-alive service that:
- Pings the health endpoint every 14 minutes
- Prevents Render's auto-sleep feature
- Only runs in production mode
- Logs activity for monitoring

---

## 🔍 Troubleshooting

### Build Failures
1. Check build logs in Render dashboard
2. Verify package.json scripts
3. Ensure all dependencies are in `dependencies` (not `devDependencies`)

### Database Connection Issues
1. Verify `DATABASE_URL` is set correctly
2. Check if migrations ran successfully
3. View server logs for Prisma errors

### CORS Errors
1. Verify `FRONTEND_URL` matches your client URL
2. Check server CORS configuration
3. Ensure both services are deployed

---

## 🌟 Production Features

✅ **Real-time collaboration** (Socket.io WebSocket support)  
✅ **Automatic SSL certificates**  
✅ **Global CDN** for frontend  
✅ **Auto-deployment** on git push  
✅ **Database backups**  
✅ **Health monitoring**  
✅ **Keep-alive service** (prevents auto-sleep)  
✅ **Graceful shutdown** handling  

---

## 🔄 Updates

To deploy updates:
1. Push changes to GitHub
2. Render will auto-deploy on `main` branch changes
3. Monitor deployment in Render dashboard

---

## 📞 Support

- **Render Docs**: [render.com/docs](https://render.com/docs)
- **Project Issues**: Create GitHub issue
- **Database Issues**: Check Render PostgreSQL logs

---

## 🎯 Next Steps

After successful deployment:
1. Test all features in production
2. Set up monitoring/alerts
3. Configure custom domain (optional)
4. Set up staging environment (optional)

Your ThinkSpace app will be live at `https://thinkspace-client.onrender.com`! 🚀